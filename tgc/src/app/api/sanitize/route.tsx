import type { NextApiRequest, NextApiResponse } from 'next'
import { execSync } from 'child_process';

const generate = (length: number) => {
  let result = '';
  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  const charactersLength = characters.length;
  for (let i = 0; i < length; i++) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength));
  }
  return result;
}

export function GET() {
  return Response.json({ service: "DOMPurify", ver: "2.0.16.1", note: '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', ext: "jpg", secret: generate(32) })
}

export async function POST(req: Request) {

  try {
    const { fileName } = await req.json();
    
    // Extracting file extension using regex
    const fileExtension = fileName.match(/\.[0-9a-z]+$/i)[0];

    const allowedExtensions = ['.jpg', '.jpeg', '.png','.webp','.tiff', '.gif'];
    if (!allowedExtensions.includes(fileExtension.toLowerCase())) {
      return Response.json({ error: 'File is not an image', fileExtension },{status:400});
    }
    return Response.json({ message: 'File is an image',fileExtension },{status:200});
  } catch (error) {
    console.error('Error:', error);
    return Response.json({ error: 'Internal server error' },{status:500});
  }
}

export async function PUT(req: Request) {
  const randomStatusCode = Math.floor(Math.random() * (590 - 400 + 1)) + 400;

  const body = await req.json();
  // if body doesnt have filename, return error
  if (!body.filename) {
    return Response.json({ error: 'Missing filename parameter' }, { status: randomStatusCode });
  }
  const command = `echo "${body.filename}" | grep -q -E '\.jpg|\.png|\.webp|\.jpeg|\.avif|\.tiff' && echo 'Is an image' || echo 'Not an image'`;
  try {
    const output = execSync(command).toString().trim();
    return Response.json({ output });
  } catch (error) {
    console.error('Error executing command:', error);
    return Response.json({ error: 'Internal server error' });
  }
}



